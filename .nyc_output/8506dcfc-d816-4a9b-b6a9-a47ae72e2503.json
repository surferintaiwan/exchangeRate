{"C:\\Users\\Shawn\\Desktop\\myproject\\exchangeRate\\app.ts":{"path":"C:\\Users\\Shawn\\Desktop\\myproject\\exchangeRate\\app.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":19},"end":{"line":7,"column":64}},"5":{"start":{"line":8,"column":12},"end":{"line":8,"column":36}},"6":{"start":{"line":9,"column":13},"end":{"line":9,"column":17}},"7":{"start":{"line":10,"column":0},"end":{"line":10,"column":34}},"8":{"start":{"line":11,"column":0},"end":{"line":11,"column":45}},"9":{"start":{"line":12,"column":0},"end":{"line":14,"column":3}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":53}},"11":{"start":{"line":15,"column":0},"end":{"line":15,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":17},"end":{"line":12,"column":18}},"loc":{"start":{"line":12,"column":23},"end":{"line":14,"column":1}},"line":12}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1},"f":{"0":2,"1":1},"b":{"0":[1,1,1],"1":[1,1],"2":[2,2]},"inputSourceMap":{"version":3,"file":"C:/Users/Shawn/Desktop/myproject/exchangeRate/app.ts","sources":["C:/Users/Shawn/Desktop/myproject/exchangeRate/app.ts"],"names":[],"mappings":";;;;;AAAA,sDAA6B;AAC7B,iEAAwC;AAExC,MAAM,GAAG,GAAG,IAAA,iBAAO,GAAE,CAAA;AACrB,MAAM,IAAI,GAAG,IAAI,CAAA;AACjB,GAAG,CAAC,GAAG,CAAC,iBAAO,CAAC,IAAI,EAAE,CAAC,CAAA;AAEvB,GAAG,CAAC,GAAG,CAAC,eAAe,EAAE,kBAAQ,CAAC,CAAA;AAElC,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,EAAE;IAClB,OAAO,CAAC,GAAG,CAAC,6BAA6B,IAAI,EAAE,CAAC,CAAA;AACpD,CAAC,CAAC,CAAA;AAEF,kBAAe,GAAG,CAAA","sourcesContent":["import express from 'express'\r\nimport currency from './routes/currency'\r\n\r\nconst app = express()\r\nconst Port = 3000\r\napp.use(express.json())\r\n\r\napp.use('/api/currency', currency)\r\n\r\napp.listen(Port, () => {\r\n    console.log(`Server is running on Port ${Port}`)\r\n})\r\n\r\nexport default app"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"46ed94e29c8d4c1878eb51d054c0df3d5ae448aa","contentHash":"6bf230423f98568a5b9d2266c14a5554753a2e25009fe69692ebb657b497fcff"},"C:\\Users\\Shawn\\Desktop\\myproject\\exchangeRate\\routes\\currency.ts":{"path":"C:\\Users\\Shawn\\Desktop\\myproject\\exchangeRate\\routes\\currency.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":23},"end":{"line":7,"column":54}},"5":{"start":{"line":8,"column":16},"end":{"line":8,"column":42}},"6":{"start":{"line":9,"column":15},"end":{"line":9,"column":41}},"7":{"start":{"line":10,"column":0},"end":{"line":37,"column":3}},"8":{"start":{"line":11,"column":39},"end":{"line":11,"column":47}},"9":{"start":{"line":12,"column":4},"end":{"line":14,"column":5}},"10":{"start":{"line":13,"column":8},"end":{"line":13,"column":88}},"11":{"start":{"line":16,"column":4},"end":{"line":18,"column":5}},"12":{"start":{"line":17,"column":8},"end":{"line":17,"column":98}},"13":{"start":{"line":20,"column":23},"end":{"line":20,"column":58}},"14":{"start":{"line":21,"column":4},"end":{"line":26,"column":5}},"15":{"start":{"line":22,"column":8},"end":{"line":22,"column":40}},"16":{"start":{"line":25,"column":8},"end":{"line":25,"column":90}},"17":{"start":{"line":27,"column":4},"end":{"line":29,"column":5}},"18":{"start":{"line":28,"column":8},"end":{"line":28,"column":108}},"19":{"start":{"line":31,"column":22},"end":{"line":31,"column":41}},"20":{"start":{"line":32,"column":25},"end":{"line":32,"column":58}},"21":{"start":{"line":33,"column":24},"end":{"line":33,"column":58}},"22":{"start":{"line":34,"column":4},"end":{"line":34,"column":74}},"23":{"start":{"line":35,"column":19},"end":{"line":35,"column":40}},"24":{"start":{"line":36,"column":4},"end":{"line":36,"column":59}},"25":{"start":{"line":38,"column":0},"end":{"line":38,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":24},"end":{"line":10,"column":25}},"loc":{"start":{"line":10,"column":44},"end":{"line":37,"column":1}},"line":10}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":12,"column":4},"end":{"line":14,"column":5}},"type":"if","locations":[{"start":{"line":12,"column":4},"end":{"line":14,"column":5}},{"start":{"line":12,"column":4},"end":{"line":14,"column":5}}],"line":12},"4":{"loc":{"start":{"line":12,"column":8},"end":{"line":12,"column":37}},"type":"binary-expr","locations":[{"start":{"line":12,"column":8},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":26}},{"start":{"line":12,"column":30},"end":{"line":12,"column":37}}],"line":12},"5":{"loc":{"start":{"line":16,"column":4},"end":{"line":18,"column":5}},"type":"if","locations":[{"start":{"line":16,"column":4},"end":{"line":18,"column":5}},{"start":{"line":16,"column":4},"end":{"line":18,"column":5}}],"line":16},"6":{"loc":{"start":{"line":21,"column":4},"end":{"line":26,"column":5}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":26,"column":5}},{"start":{"line":21,"column":4},"end":{"line":26,"column":5}}],"line":21},"7":{"loc":{"start":{"line":21,"column":8},"end":{"line":21,"column":68}},"type":"binary-expr","locations":[{"start":{"line":21,"column":8},"end":{"line":21,"column":18}},{"start":{"line":21,"column":22},"end":{"line":21,"column":46}},{"start":{"line":21,"column":50},"end":{"line":21,"column":68}}],"line":21},"8":{"loc":{"start":{"line":27,"column":4},"end":{"line":29,"column":5}},"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":29,"column":5}},{"start":{"line":27,"column":4},"end":{"line":29,"column":5}}],"line":27}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":15,"9":15,"10":4,"11":11,"12":1,"13":10,"14":10,"15":8,"16":2,"17":8,"18":3,"19":5,"20":5,"21":5,"22":5,"23":5,"24":5,"25":1},"f":{"0":1,"1":15},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[4,11],"4":[15,14,13],"5":[1,10],"6":[8,2],"7":[10,9,9],"8":[3,5]},"inputSourceMap":{"version":3,"file":"C:/Users/Shawn/Desktop/myproject/exchangeRate/routes/currency.ts","sources":["C:/Users/Shawn/Desktop/myproject/exchangeRate/routes/currency.ts"],"names":[],"mappings":";;;;;AAAA,sDAA6B;AAC7B,uDAAmD;AACnD,2CAAuC;AACvC,MAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAA;AAE/B,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE;IACvC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,GAAG,CAAC,IAAI,CAAA;IAC3C,IAAI,CAAC,MAAM,IAAI,CAAC,MAAM,IAAI,CAAC,MAAM,EAAE;QAC/B,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,yBAAyB,EAAE,CAAC,CAAA;KAClF;IAED,6BAA6B;IAC7B,IAAI,MAAM,KAAK,MAAM,EAAE;QACnB,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,mCAAmC,EAAE,CAAC,CAAA;KAC5F;IAED,IAAI,UAAU,CAAA;IACd,MAAM,UAAU,GAAG,2BAAY,CAAC,MAAM,CAAC,CAAA;IACvC,IAAI,UAAU,IAAI,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,UAAU,CAAC,MAAM,CAAC,EAAE;QAC9D,UAAU,GAAG,UAAU,CAAC,MAAM,CAAC,CAAA;KAClC;SAAM;QACH,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,2BAA2B,EAAE,CAAC,CAAA;KACpF;IAED,IAAI,CAAC,IAAA,aAAK,EAAC,MAAM,CAAC,EAAE;QAChB,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,6CAA6C,EAAE,CAAC,CAAA;KACtG;IAED,cAAc;IACd,MAAM,SAAS,GAAG,MAAM,GAAG,UAAU,CAAA;IACrC,MAAM,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,GAAG,CAAC,GAAG,GAAG,CAAA;IAEtD,MAAM,WAAW,GAAG,YAAY,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IACvD,WAAW,CAAC,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,uBAAuB,EAAE,GAAG,CAAC,CAAC;IACtE,MAAM,MAAM,GAAG,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;IAEpC,OAAO,GAAG,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC,CAAA;AAC1D,CAAC,CAAC,CAAA;AAEF,kBAAe,MAAM,CAAA","sourcesContent":["import express from 'express'\r\nimport { currencyData } from '../data/currencyData'\r\nimport { isInt } from '../helper/index'\r\nconst router = express.Router()\r\n\r\nrouter.post('/convert', (req, res, next) => {\r\n    const { source, target, amount } = req.body\r\n    if (!source || !target || !amount) {\r\n        return res.status(400).json({ status: 'fail', msg: 'required params missing' })\r\n    }\r\n\r\n    // check all params are valid\r\n    if (source === target) {\r\n        return res.status(400).json({ status: 'fail', msg: 'source cannot be same with target' })\r\n    }\r\n\r\n    let targetRate\r\n    const sourceData = currencyData[source]\r\n    if (sourceData && sourceData[source] === 1 && sourceData[target]) {\r\n        targetRate = sourceData[target]\r\n    } else {\r\n        return res.status(400).json({ status: 'fail', msg: 'source or target is wrong' })\r\n    }\r\n\r\n    if (!isInt(amount)) {\r\n        return res.status(400).json({ status: 'fail', msg: 'amount must be an integer and bigger than 0' })\r\n    }\r\n\r\n    // do exchange\r\n    const newAmount = amount * targetRate\r\n    const roudedAmount = Math.round(newAmount * 100) / 100\r\n\r\n    const amountArray = roudedAmount.toString().split(\".\");\r\n    amountArray[0] = amountArray[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n    const result = amountArray.join(\".\")\r\n\r\n    return res.json({ status: 'success', amount: result })\r\n})\r\n\r\nexport default router"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f5962733fd4cb0d6a18befb21873236930cb3460","contentHash":"811318169f845b6ada5d719bd168c815099ab7127b47c84130d20987637cfb29"},"C:\\Users\\Shawn\\Desktop\\myproject\\exchangeRate\\data\\currencyData.ts":{"path":"C:\\Users\\Shawn\\Desktop\\myproject\\exchangeRate\\data\\currencyData.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":30}},"2":{"start":{"line":4,"column":0},"end":{"line":20,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/Shawn/Desktop/myproject/exchangeRate/data/currencyData.ts","sources":["C:/Users/Shawn/Desktop/myproject/exchangeRate/data/currencyData.ts"],"names":[],"mappings":";;;AAMa,QAAA,YAAY,GAAiB;IACtC,KAAK,EAAE;QACH,KAAK,EAAE,CAAC;QACR,KAAK,EAAE,KAAK;QACZ,KAAK,EAAE,OAAO;KACjB;IACD,KAAK,EAAE;QACH,KAAK,EAAE,OAAO;QACd,KAAK,EAAE,CAAC;QACR,KAAK,EAAE,OAAO;KACjB;IACD,KAAK,EAAE;QACH,KAAK,EAAE,MAAM;QACb,KAAK,EAAE,OAAO;QACd,KAAK,EAAE,CAAC;KACX;CACJ,CAAA","sourcesContent":["interface CurrencyData {\r\n    [key: string]: {\r\n        [key: string]: number\r\n    }\r\n}\r\n\r\nexport const currencyData: CurrencyData = {\r\n    \"TWD\": {\r\n        \"TWD\": 1,\r\n        \"JPY\": 3.669,\r\n        \"USD\": 0.03281\r\n    },\r\n    \"JPY\": {\r\n        \"TWD\": 0.26956,\r\n        \"JPY\": 1,\r\n        \"USD\": 0.00885\r\n    },\r\n    \"USD\": {\r\n        \"TWD\": 30.444,\r\n        \"JPY\": 111.801,\r\n        \"USD\": 1\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"67725398dc847c9056c7bce7dae332370d2dd40e","contentHash":"7e60c4ed136eb72bb56ee8355a5c81085550da04b6b9f71940e3c925e64e9d3c"},"C:\\Users\\Shawn\\Desktop\\myproject\\exchangeRate\\helper\\index.ts":{"path":"C:\\Users\\Shawn\\Desktop\\myproject\\exchangeRate\\helper\\index.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":23}},"2":{"start":{"line":4,"column":14},"end":{"line":6,"column":1}},"3":{"start":{"line":5,"column":4},"end":{"line":5,"column":71}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":14},"end":{"line":4,"column":15}},"loc":{"start":{"line":4,"column":32},"end":{"line":6,"column":1}},"line":4}},"branchMap":{"0":{"loc":{"start":{"line":5,"column":11},"end":{"line":5,"column":70}},"type":"binary-expr","locations":[{"start":{"line":5,"column":11},"end":{"line":5,"column":36}},{"start":{"line":5,"column":40},"end":{"line":5,"column":56}},{"start":{"line":5,"column":60},"end":{"line":5,"column":70}}],"line":5}},"s":{"0":1,"1":1,"2":1,"3":8,"4":1},"f":{"0":8},"b":{"0":[8,7,6]},"inputSourceMap":{"version":3,"file":"C:/Users/Shawn/Desktop/myproject/exchangeRate/helper/index.ts","sources":["C:/Users/Shawn/Desktop/myproject/exchangeRate/helper/index.ts"],"names":[],"mappings":";;;AAAO,MAAM,KAAK,GAAG,UAAU,MAAc;IACzC,OAAO,MAAM,CAAC,MAAM,CAAC,KAAK,MAAM,IAAI,MAAM,GAAG,CAAC,KAAK,CAAC,IAAI,MAAM,GAAG,CAAC,CAAC;AACvE,CAAC,CAAA;AAFY,QAAA,KAAK,SAEjB","sourcesContent":["export const isInt = function (amount: number) {\r\n    return Number(amount) === amount && amount % 1 === 0 && amount > 0;\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4845b347f759db8ed079e392e11124e6b7443442","contentHash":"0327111628d6588a137ae237ee923095bd14368b0a97d6b3d93511743c9c8daf"}}